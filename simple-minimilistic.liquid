<style>


  .patriotic-sale-container {
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
    min-height: 100vh;
    padding: 40px 20px;
  }

  .sale-header {
    margin-bottom: 30px;
    padding: 30px 20px;
    background: transparent;
    border-radius: 20px;
    color: #333;
    box-shadow: none;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 40px;
    min-height: 400px;
  }

  .independence-badge {
    background: #dc3545;
    color: white;
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .hero-left {
    flex: 1;
    text-align: left;
    max-width: 500px;
  }

  .hero-right {
    flex: 0 0 350px;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .sale-header h1 {
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 900;
    margin-bottom: 15px;
    color: #0071ce;
    letter-spacing: 1px;
    line-height: 1.1;
  }

  .sale-header h1 .gradient-text {
    background: linear-gradient(45deg, #0071ce 0%, #dc3545 50%, #0071ce 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .sale-header .discount {
    font-size: clamp(1.8rem, 4vw, 2.8rem);
    font-weight: 900;
    color: #dc3545;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
    margin-bottom: 15px;
    letter-spacing: 1px;
  }

  .sale-subtitle {
    font-size: clamp(0.9rem, 1.8vw, 1.1rem);
    color: #666;
    font-weight: 400;
    line-height: 1.4;
    margin-bottom: 25px;
  }

  .header-timer {
    background: white;
    border: 2px solid #dc3545;
    border-radius: 12px;
    padding: 20px 15px;
    width: 100%;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .header-timer-label {
    color: #dc3545;
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 15px;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    letter-spacing: 1px;
  }

  .header-timer-label::before,
  .header-timer-label::after {
    content: '';
    color: #dc3545;
    font-size: 1.2rem;
    animation: flash 1.5s infinite;
  }

  .header-countdown {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 6px;
  }

  .header-countdown-unit {
    background: white;
    border: 2px solid #dc3545;
    border-radius: 8px;
    padding: 8px 4px;
    text-align: center;
    transition: transform 0.3s ease;
  }

  .header-countdown-unit:hover {
    transform: translateY(-2px);
    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.2);
  }

  .header-countdown-unit span {
    display: block;
    font-size: 1.2rem;
    font-weight: 900;
    color: #dc3545;
    line-height: 1;
    margin-bottom: 2px;
    font-family: 'Arial', sans-serif;
  }

  .header-countdown-unit label {
    font-size: 0.6rem;
    font-weight: 700;
    color: #dc3545;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .hero-tab-buttons {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 100%;
  }

  .hero-tab-button {
    padding: 15px 20px;
    background: white;
    border: 2px solid #0071ce;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    color: #0071ce;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    text-align: center;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    box-shadow: 0 2px 6px rgba(0, 113, 206, 0.1);
  }

  .hero-tab-button.active {
    background: #0071ce;
    border-color: #0071ce;
    color: white;
    transform: translateX(5px);
    box-shadow: 0 4px 12px rgba(0, 113, 206, 0.3);
  }

  .hero-tab-button:hover:not(.active) {
    background: #f0f8ff;
    border-color: #005ba6;
    color: #005ba6;
    transform: translateX(3px);
  }

  .shop-now-cta {
    background: linear-gradient(45deg, #0071ce, #dc3545);
    color: white;
    padding: 12px 30px;
    border: none;
    border-radius: 25px;
    font-weight: 900;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 5px 15px rgba(0, 113, 206, 0.3);
  }

  .shop-now-cta:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(220, 53, 69, 0.5);
    color: white;
    text-decoration: none;
    filter: brightness(1.1);
  }

  .tabs-container {
    max-width: 100%;
    margin: 0 auto;
  }

  .sticky-tab-container {
    position: fixed;
    top: 0;
    left: 55%;
    transform: translateX(-55%) translateY(-100%);
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
    padding: 5px 5px;
    z-index: 800;
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.15);
    transition: transform 0.3s ease;
    border-bottom: 3px solid #0071ce;
    max-width: 1100px;
    width: calc(100% - 40px);
    border-radius: 0 0 15px 15px;
  }

  .sticky-tab-container.show {
    transform: translateX(-50%) translateY(0);
  }

  .sticky-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 20px;
  }

  .sticky-tabs {
    display: flex;
    gap: 10px;
  }

  .sticky-tab-button {
    padding: 10px 25px;
    background: #f8f9fa;
    border: 2px solid #dee2e6;
    border-radius: 20px;
    font-size: 1rem;
    font-weight: 700;
    color: #495057;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
  }

  .sticky-tab-button.active {
    background: linear-gradient(45deg, #1E3A8A, #0071ce);
    color: white;
    border-color: #0071ce;
    transform: translateY(-1px);
    box-shadow: 0 3px 10px rgba(0, 113, 206, 0.3);
  }

  .sticky-timer {
    background: white;
    border: 2px solid #dc3545;
    border-radius: 10px;
    padding: 10px 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .sticky-timer-label {
    color: #dc3545;
    font-size: 0.8rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    white-space: nowrap;
  }

  .sticky-countdown {
    display: flex;
    gap: 8px;
  }

  .sticky-countdown-unit {
    background: white;
    border: 1px solid #dc3545;
    border-radius: 4px;
    padding: 4px 6px;
    text-align: center;
    min-width: 35px;
  }

  .sticky-countdown-unit span {
    display: block;
    font-size: 1rem;
    font-weight: 900;
    color: #dc3545;
    line-height: 1;
    margin-bottom: 2px;
  }

  .sticky-countdown-unit label {
    font-size: 0.5rem;
    font-weight: 700;
    color: #dc3545;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .tab-buttons {
    display: flex;
    justify-content: center;
    margin-bottom: 40px;
    gap: 10px;
  }

  .tab-button {
    padding: 15px 40px;
    background: #f8f9fa;
    border: 2px solid #dee2e6;
    border-radius: 25px;
    font-size: 1.2rem;
    font-weight: 700;
    color: #495057;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
  }

  .tab-button.active {
    background: linear-gradient(45deg, #1E3A8A, #0071ce);
    color: white;
    border-color: #0071ce;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 113, 206, 0.3);
  }

  .tab-button:hover:not(.active) {
    background: #e9ecef;
    border-color: #adb5bd;
    transform: translateY(-1px);
  }

  .tab-content {
    display: block;
  }

  .tab-content.active {
    display: block;
  }

  .collection-section {
    margin-bottom: 80px;
    background: white;
    border-radius: 20px;
    overflow: hidden;
    border: 2px solid #e5e7eb;
  }

  .collection-header {
    padding: 40px;
    background: white;
    display: flex;
    align-items: center;
    gap: 50px;
    min-height: 280px;
  }

  .collection-header.reverse {
    flex-direction: row-reverse;
  }

  .collection-header-content {
    flex: 1;
  }

  .collection-header-image {
    flex: 0 0 400px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .collection-header img {
    max-width: 280px;
    max-height: 200px;
    width: auto;
    height: auto;
    object-fit: contain;
    border-radius: 12px;
    border: 3px solid #0071ce;
    padding: 0px;
    background: white;
  }

  .collection-title {
    font-size: 1.8rem;
    font-weight: 700;
    color: #0071ce;
    margin-bottom: 10px;
    line-height: 1.2;
  }

  .products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    padding: 40px;
  }

  .product-card {
    background: white;
    border-radius: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 2px solid #0071ce;
    position: relative;
    max-width: 350px;
    width: 100%;
    margin: 0 auto;
  }

  .product-card:hover {
    transform: translateY(-2px);
    border-color: #005ba6;
  }

  .discount-badge {
    position: absolute;
    top: -0px;
    right: -8px;
    z-index: 10;
  }

  .discount-label {
    background: #0071ce !important;
    color: white !important;
    padding: 6px 14px 6px 10px;
    font-weight: 700;
    font-size: 0.75rem;
    text-align: center;
    position: relative;
    display: inline-flex;
    align-items: center;
    min-height: 24px;
    border-radius: 0 3px 3px 0;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
  }

  .discount-label::before {
    content: 'Discount';
    position: absolute;
    right: 100%;
    top: 0;
    bottom: 0;
    background: #dc3545;
    color: white;
    padding: 6px 8px;
    font-size: 0.6rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    border-radius: 3px 0 0 3px;
    white-space: nowrap;
    min-height: 24px;
    box-sizing: border-box;
  }

  .discount-label::after {
    content: '';
    position: absolute;
    right: 100%;
    top: 100%;
    width: 0;
    height: 0;
    border-left: 5px solid #a91e2e;
    border-bottom: 5px solid transparent;
  }

  @keyframes glow {
    from { opacity: 0.7; }
    to { opacity: 1; }
  }

  .product-image {
    height: 280px; /* Increased height */
    background: white;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 30px 20px;
    border-bottom: 1px solid #e0e0e0;
  }

  .product-image img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
  }

  .product-content {
    padding: 20px;
  }

  .product-title {
    font-size: 1rem;
    font-weight: 600;
    color: #0071ce; /* Brand blue color */
    margin-bottom: 12px;
    line-height: 1.4;
    min-height: 48px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .product-sku {
    color: #666;
    font-size: 0.85rem;
    margin-bottom: 6px; /* Reduced margin */
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    cursor: pointer;
    gap: 8px;
  }

  .copy-icon {
    width: 16px;
    height: 16px;
    cursor: pointer;
    color: #0071ce;
    transition: color 0.2s ease;
  }

  .copy-icon:hover {
    color: #005ba6;
  }

  .product-price {
    margin-bottom: 12px; /* Reduced margin */
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .original-price {
    text-decoration: line-through;
    color: #999;
    font-size: 0.9rem;
  }

  .sale-price {
    color: #0071ce;
    font-size: 1.4rem;
    font-weight: 700;
  }

  .final-price {
    color: #dc3545;
    font-size: 1.6rem;
    font-weight: 900;
    margin-left: 10px;
  }

  .smart-savings {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 6px 8px; /* Further reduced padding */
    margin: 8px 0 12px 0; /* Reduced margins */
    border: 1px solid #e9ecef;
  }

  .smart-savings-header {
    display: flex;
    align-items: center;
    font-weight: 700;
    color: #495057;
    font-size: 0.85rem; /* Slightly smaller font */
    margin-bottom: 4px; /* Reduced margin */
    justify-content: space-between;
    cursor: pointer;
  }

  .savings-preview {
    font-size: 0.75rem; /* Smaller font */
    color: #6c757d;
    margin: 0; /* Removed margins */
    padding: 0; /* Removed padding */
    line-height: 1.2; /* Tighter line height */
  }

  .savings-option {
    background: #d1ecf1;
    border: 2px solid #bee5eb;
    border-radius: 6px;
    padding: 8px 10px;
    position: relative;
  }

  .savings-option.most-popular::before {
    content: 'MOST POPULAR';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    background: #28a745;
    color: white;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.65rem;
    font-weight: 700;
  }

  .savings-text {
    color: #121212;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 2px;
  }

  .savings-price {
    color: #495057;
    font-size: 0.8rem;
  }

  .savings-amount {
    font-weight: 700;
  }

  .savings-details {
    display: none;
    padding-top: 10px;
  }

  .smart-savings-toggle {
    cursor: pointer;
    font-size: 0.8rem;
    color: #0071ce;
    user-select: none;
  }

  .smart-savings.expanded .savings-details {
    display: block;
  }

  .smart-savings.expanded .smart-savings-toggle {
    transform: rotate(180deg);
  }

  .product-cta {
    background: #0071ce;
    color: white;
    padding: 12px 25px;
    border: none;
    border-radius: 25px;
    font-weight: 700;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    text-align: center;
    width: 100%;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .product-cta:hover {
    background: #005ba6;
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0, 113, 206, 0.4);
    color: white;
    text-decoration: none;
  }

  .product-card {
    cursor: pointer;
  }

  /* Toast notification styles */
  .toast {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    padding: 12px 24px;
    border-radius: 25px;
    font-size: 0.9rem;
    font-weight: 600;
    z-index: 1000;
    opacity: 0;
    transition: opacity 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .toast.show {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .sticky-tab-container {
      width: calc(100% - 20px);
      padding: 12px 15px;
      left: 50%;
      transform: translateX(-50%) translateY(-100%);
    }

    .sticky-tab-container.show {
      transform: translateX(-50%) translateY(0);
    }

    .sticky-content {
      flex-direction: column;
      gap: 10px;
    }

    .sticky-tabs {
      gap: 5px;
    }

    .sticky-tab-button {
      padding: 8px 12px;
      font-size: 0.8rem;
    }

    .sticky-timer {
      padding: 8px 12px;
      gap: 10px;
    }

    .sticky-countdown {
      gap: 5px;
    }

    .sticky-countdown-unit {
      min-width: 30px;
      padding: 3px 4px;
    }

    .sticky-countdown-unit span {
      font-size: 0.9rem;
    }

    .sticky-countdown-unit label {
      font-size: 0.6rem;
    }

    .patriotic-sale-container {
      padding: 20px 10px;
    }

    .sale-header {
      padding: 25px 15px;
      flex-direction: column;
      text-align: center;
      min-height: auto;
      gap: 25px;
    }

    .hero-left {
      text-align: center;
      max-width: 100%;
    }

    .hero-right {
      flex: none;
      width: 100%;
      max-width: 350px;
      margin: 0 auto;
    }

    .header-timer {
      padding: 18px 15px;
    }

    .header-countdown {
      gap: 4px;
    }

    .header-countdown-unit {
      padding: 6px 4px;
    }

    .header-countdown-unit span {
      font-size: 1rem;
    }

    .header-countdown-unit label {
      font-size: 0.55rem;
    }

    .hero-tab-buttons {
      flex-direction: row;
      gap: 8px;
    }

    .hero-tab-button {
      padding: 12px 12px;
      font-size: 0.8rem;
    }

    .shop-now-cta {
      padding: 12px 25px;
      font-size: 0.9rem;
      margin-top: 15px;
    }

    .tab-buttons {
      flex-direction: column;
      align-items: center;
    }

    .tab-button {
      width: 100%;
      max-width: 300px;
      margin-bottom: 10px;
    }

    .products-grid {
      grid-template-columns: 1fr;
      gap: 20px;
      padding: 20px;
    }

    .collection-header {
      padding: 25px 20px;
      flex-direction: column;
      text-align: center;
      gap: 20px;
      min-height: auto;
    }

    .collection-header.reverse {
      flex-direction: column;
    }

    .collection-header-image {
      flex: none;
    }

    .collection-title {
      font-size: 1.5rem;
    }
  }
  .discount-badge {
    position: absolute;
    top: -0px; /* Adjust as needed */
    right: -5px; /* Adjust as needed */
    z-index: 10;
}

/* Apple-style Popup Overlay */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  z-index: 10000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s ease;
}

.overlay.show {
  opacity: 1;
  visibility: visible;
}

/* Apple-style Popup */
.add-to-cart-popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.9);
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 20px;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
  z-index: 10001;
  max-width: 480px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.add-to-cart-popup.show {
  opacity: 1;
  visibility: visible;
  transform: translate(-50%, -50%) scale(1);
}

.popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px 0 24px;
  margin-bottom: 20px;
  position: relative;
}

.popup-discount-badge {
  position: absolute;
  top: 10px;
  right: 60px;
  background: #dc3545;
  color: white;
  padding: 4px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
}

.popup-close {
  background: rgba(120, 120, 128, 0.12);
  border: none;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background-color 0.2s ease;
  color: #666;
  font-size: 16px;
  font-weight: 500;
}

.popup-close:hover {
  background: rgba(120, 120, 128, 0.2);
}

.popup-content {
  padding: 0 24px 24px 24px;
}

.popup-product-image {
  width: 120px;
  height: 120px;
  background: #f8f9fa;
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 20px auto;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.popup-product-image img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 12px;
}

.popup-product-title {
  font-size: 18px;
  font-weight: 600;
  color: #1d1d1f;
  margin-bottom: 8px;
  line-height: 1.3;
  text-align: center;
}

.popup-product-sku {
  font-size: 14px;
  color: #86868b;
  margin-bottom: 12px;
  text-align: center;
}

.popup-product-price {
  margin-bottom: 20px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.popup-original-price {
  text-decoration: line-through;
  color: #999;
  font-size: 14px;
}

.popup-sale-price {
  color: #0071ce;
  font-size: 18px;
  font-weight: 600;
}

.popup-final-price {
  color: #dc3545;
  font-size: 20px;
  font-weight: 700;
}

.popup-smart-savings {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 12px 16px;
  margin-bottom: 20px;
  border: 1px solid #e9ecef;
}

.popup-smart-savings-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-weight: 600;
  color: #495057;
  font-size: 14px;
  margin-bottom: 8px;
  cursor: pointer;
}

.popup-savings-preview {
  font-size: 12px;
  color: #6c757d;
  margin: 0;
  line-height: 1.2;
}

.popup-savings-details {
  display: none;
  padding-top: 12px;
}

.popup-smart-savings.expanded .popup-savings-details {
  display: block;
}

.popup-smart-savings.expanded .popup-smart-savings-toggle {
  transform: rotate(180deg);
}

.popup-savings-option {
  background: #d1ecf1;
  border: 2px solid #bee5eb;
  border-radius: 8px;
  padding: 10px 12px;
  position: relative;
}

.popup-savings-option.most-popular::before {
  content: 'MOST POPULAR';
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%);
  background: #28a745;
  color: white;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  font-weight: 700;
}

.popup-savings-text {
  color: #121212;
  font-size: 14px;
  font-weight: 600;
  margin-bottom: 4px;
}

.popup-savings-price {
  color: #495057;
  font-size: 12px;
}

.popup-savings-amount {
  font-weight: 700;
}

.popup-quantity-section {
  margin-bottom: 24px;
}

.popup-quantity-label {
  font-size: 16px;
  font-weight: 500;
  color: #1d1d1f;
  margin-bottom: 12px;
  text-align: center;
  display: block;
}

.popup-quantity-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 16px;
}

.popup-quantity-btn {
  background: rgba(0, 0, 0, 0.04);
  border: none;
  border-radius: 8px;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 18px;
  font-weight: 500;
  color: #1d1d1f;
}

.popup-quantity-btn:hover {
  background: rgba(0, 0, 0, 0.08);
  transform: scale(1.05);
}

.popup-quantity-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  transform: none;
}

.popup-quantity-input {
  background: rgba(0, 0, 0, 0.04);
  border: none;
  border-radius: 8px;
  width: 60px;
  height: 44px;
  text-align: center;
  font-size: 16px;
  font-weight: 500;
  color: #1d1d1f;
}

.popup-add-to-cart {
  background: #0071ce;
  color: white;
  border: none;
  border-radius: 12px;
  padding: 16px 24px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  width: 100%;
  margin-bottom: 20px;
}

.popup-add-to-cart:hover {
  background: #005ba6;
  transform: translateY(-1px);
}

.popup-recommended {
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  padding-top: 20px;
  text-align: center;
}

.popup-recommended h3 {
  font-size: 16px;
  font-weight: 600;
  color: #1d1d1f;
  margin-bottom: 12px;
}

.popup-recommended p {
  font-size: 14px;
  color: #86868b;
  margin: 0;
}

/* Cart Notifications */
.cart-notification {
  position: fixed;
  top: 20px;
  right: 20px;
  background: white;
  border-radius: 12px;
  padding: 16px 20px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
  z-index: 10002;
  opacity: 0;
  transform: translateX(100%);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-left: 4px solid #28a745;
  max-width: 350px;
}

.cart-notification.error {
  border-left-color: #dc3545;
}

.cart-notification.show {
  opacity: 1;
  transform: translateX(0);
}

.notification-content {
  display: flex;
  align-items: center;
  gap: 12px;
}

.notification-icon {
  width: 24px;
  height: 24px;
  background: #28a745;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  flex-shrink: 0;
}

.cart-notification.error .notification-icon {
  background: #dc3545;
}

.notification-text {
  font-size: 14px;
  font-weight: 500;
  color: #1d1d1f;
}

/* Checkout Section */
.popup-checkout-section {
  margin-top: 20px;
  padding-top: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.checkout-buttons {
  display: flex;
  gap: 12px;
  margin-bottom: 24px;
}

.checkout-btn {
  flex: 1;
  padding: 14px 20px;
  border: none;
  border-radius: 12px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.checkout-btn.primary {
  background: #0071ce;
  color: white;
}

.checkout-btn.primary:hover {
  background: #005ba6;
  transform: translateY(-1px);
}

.checkout-btn.secondary {
  background: rgba(0, 0, 0, 0.04);
  color: #1d1d1f;
}

.checkout-btn.secondary:hover {
  background: rgba(0, 0, 0, 0.08);
}

.checkout-icon {
  font-size: 16px;
}

/* Related Products */
.related-products-section h3 {
  font-size: 16px;
  font-weight: 600;
  color: #1d1d1f;
  margin-bottom: 16px;
  text-align: center;
}

.related-products-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}

.related-product-card {
  background: #f8f9fa;
  border-radius: 12px;
  padding: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.related-product-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  border-color: #0071ce;
}

.related-product-image {
  width: 60px;
  height: 60px;
  background: white;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 8px auto;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.related-product-image img {
  max-width: 100%;
  max-height: 100%;
  object-fit: contain;
  border-radius: 6px;
}

.related-placeholder {
  font-size: 24px;
  color: #666;
}

.related-product-info h4 {
  font-size: 12px;
  font-weight: 600;
  color: #1d1d1f;
  margin-bottom: 6px;
  line-height: 1.3;
  text-align: center;
}

.related-product-price {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  margin-bottom: 6px;
}

.related-sale-price {
  font-size: 11px;
  color: #999;
  text-decoration: line-through;
}

.related-final-price {
  font-size: 12px;
  font-weight: 600;
  color: #dc3545;
}

.related-discount-badge {
  background: #dc3545;
  color: white;
  padding: 2px 6px;
  border-radius: 6px;
  font-size: 10px;
  font-weight: 600;
  text-align: center;
}

/* Mobile Responsive */
@media (max-width: 480px) {
  .add-to-cart-popup {
    max-width: 95%;
    margin: 20px;
    border-radius: 16px;
  }

  .popup-header {
    padding: 16px 20px 0 20px;
  }

  .popup-content {
    padding: 0 20px 20px 20px;
  }

  .popup-product-title {
    font-size: 16px;
  }

  .popup-product-price {
    font-size: 18px;
  }

  .cart-notification {
    top: 10px;
    right: 10px;
    left: 10px;
    max-width: none;
  }

  .checkout-buttons {
    flex-direction: column;
  }

  .related-products-grid {
    grid-template-columns: 1fr;
  }
}
</style>

<div class="patriotic-sale-container">
  <div class="sale-header">
    <div class="hero-left">
      <div class="independence-badge">US Independence Day Special</div>
      <h1>Our <span class="gradient-text">Biggest</span> Patriotic <span class="gradient-text">Sale</span> of the <span class="gradient-text">Year!</span></h1>
      <div class="discount">UP TO 50% OFF</div>
      {% comment %} <div class="sale-subtitle">
        Celebrate America's independence with our biggest sale of the year!
      </div> {% endcomment %}
      <a href="#products-section" class="shop-now-cta" onclick="scrollToProducts()">Shop Now & Save Big!</a>
    </div>

    <div class="hero-right">
      <div class="header-timer">
        <div class="header-timer-label">Sale Ends July 31st</div>
        <div class="header-countdown">
          <div class="header-countdown-unit">
            <span id="days">02</span>
            <label>Days</label>
          </div>
          <div class="header-countdown-unit">
            <span id="hours">06</span>
            <label>Hours</label>
          </div>
          <div class="header-countdown-unit">
            <span id="minutes">25</span>
            <label>Mins</label>
          </div>
          <div class="header-countdown-unit">
            <span id="seconds">41</span>
            <label>Secs</label>
          </div>
        </div>
      </div>
    </div>
  </div>



  <div class="tabs-container" id="products-section">

    <!-- Bioprocess Products -->

      <!-- PC Rectangular Carboy Collection -->
      {% assign pc_carboy_collection = collections['pc-rectangular-carboy-bioprocess-us-independence-day-sale-25'] %}
      {% if pc_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® PC Rectangular Carboys</h2>
          </div>
          <div class="collection-header-image">
            {% if pc_carboy_collection.image %}
              <img src="{{ pc_carboy_collection.image | img_url: '400x400' }}" alt="{{ pc_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in pc_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">20% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="20"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">&nbsp;</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- PC TR Carboy Collection -->
      {% assign pc_tr_carboy_collection = collections['pc-tr-carboy-bioprocess-us-independence-day-sale-25'] %}
      {% if pc_tr_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® TR Carboys</h2>
          </div>
          <div class="collection-header-image">
            {% if pc_tr_carboy_collection.image %}
              <img src="{{ pc_tr_carboy_collection.image | img_url: '400x400' }}" alt="{{ pc_tr_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in pc_tr_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">15% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="15"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">MOST POPULAR</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- EZBio Bottles PC Collection -->
      {% assign ezbio_bottles_collection = collections['ezbio-bottles-pc-bioprocess-us-independence-day-sale-25'] %}
      {% if ezbio_bottles_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® Media Bottles</h2>
          </div>
          <div class="collection-header-image">
            {% if ezbio_bottles_collection.image %}
              <img src="{{ ezbio_bottles_collection.image | img_url: '400x400' }}" alt="{{ ezbio_bottles_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezbio_bottles_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">12% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="12"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">BEST VALUE</span>
                    <div class="savings-text">More than 3 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="3"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>      </div>
      {% endif %}

      <!-- EZBio TS Bottles Collection -->
      {% assign ezbio_ts_bottles_collection = collections['ezbio-ts-bottles-bioprocess-us-independence-day-sale-25'] %}
      {% if ezbio_ts_bottles_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® TS Bottles</h2>
          </div>
          <div class="collection-header-image">
            {% if ezbio_ts_bottles_collection.image %}
              <img src="{{ ezbio_ts_bottles_collection.image | img_url: '400x400' }}" alt="{{ ezbio_ts_bottles_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezbio_ts_bottles_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">12% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="12"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">BEST VALUE</span>
                    <div class="savings-text">More than 3 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="3"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- PFA Bottles Collection -->
      {% assign pfa_bottles_collection = collections['ezbio-pure-pfa-bottles-bioprocess-us-independence-day-sale-25'] %}
      {% if pfa_bottles_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® Pure PFA Bottle</h2>
          </div>
          <div class="collection-header-image">
            {% if pfa_bottles_collection.image %}
              <img src="{{ pfa_bottles_collection.image | img_url: '400x400' }}" alt="{{ pfa_bottles_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in pfa_bottles_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">40% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="40"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">HUGE SAVINGS</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- AQG Collection -->
      {% assign aqg_collection = collections['cpc-aqg-sanitary-connector-bioprocess-us-independence-day-sale-25'] %}
      {% if aqg_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">CPC® AseptiQuik G Sanitary Connector</h2>
          </div>
          <div class="collection-header-image">
            {% if aqg_collection.image %}
              <img src="{{ aqg_collection.image | img_url: '400x400' }}" alt="{{ aqg_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in aqg_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">50% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="50"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">BEST DEAL</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
{% endif %}

      <!-- CPC Stream Thru Connectors Collection -->
      {% assign cpc_stream_thru_connectors_collection = collections['cpc-stream-thru-connectors-bioprocess-us-independence-day-sale-25'] %}
      {% if cpc_stream_thru_connectors_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">CPC Steam Thru Connectors</h2>
          </div>
          <div class="collection-header-image">
            {% if cpc_stream_thru_connectors_collection.image %}
              <img src="{{ cpc_stream_thru_connectors_collection.image | img_url: '400x400' }}" alt="{{ cpc_stream_thru_connectors_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in cpc_stream_thru_connectors_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">50% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="50"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">BEST DEAL</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- EZBio Bottle Assembly PC Collection -->
      {% assign ezbio_bottle_assembly_pc_collection = collections['ezbio-single-use-bottle-assembly-bioprocess-pc-us-independence-day-sale-25'] %}
      {% if ezbio_bottle_assembly_pc_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio® PC Bottle Assembly</h2>
          </div>
          <div class="collection-header-image">
            {% if ezbio_bottle_assembly_pc_collection.image %}
              <img src="{{ ezbio_bottle_assembly_pc_collection.image | img_url: '400x400' }}" alt="{{ ezbio_bottle_assembly_pc_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezbio_bottle_assembly_pc_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">12% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="12"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">BEST VALUE</span>
                    <div class="savings-text">More than 3 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="3"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

    <!-- Laboratory Products -->

      <!-- EZLabpure Carboy Collection -->
      {% assign ezlabpure_carboy_collection = collections['ezlabpure-20l-round-carboy-lab-us-independence-day-sale-25'] %}
      {% if ezlabpure_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">EZLabpure™ Round Carboys</h2>
          </div>
          <div class="collection-header-image">
            {% if ezlabpure_carboy_collection.image %}
              <img src="{{ ezlabpure_carboy_collection.image | img_url: '400x400' }}" alt="{{ ezlabpure_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezlabpure_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">25% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="25"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">GREAT VALUE</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- EZclear Carboy Collection -->
      {% assign ezclear_carboy_collection = collections['ezclear-5l-pc-space-saving-carboy-lab-us-independence-day-sale-25'] %}
      {% if ezclear_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">EZclear PC Space-Saving Carboys</h2>
          </div>
          <div class="collection-header-image">
            {% if ezclear_carboy_collection.image %}
              <img src="{{ ezclear_carboy_collection.image | img_url: '400x400' }}" alt="{{ ezclear_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezclear_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">32% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="32"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">EXCELLENT DEAL</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- EZgrip Carboy Collection -->
      {% assign ezgrip_carboy_collection = collections['ezgrip-10l-autoclavable-pp-lab-us-independence-day-sale-25'] %}
      {% if ezgrip_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header">
          <div class="collection-header-content">
            <h2 class="collection-title">EZgrip® Autoclavable PP Carboys</h2>
          </div>
          <div class="collection-header-image">
            {% if ezgrip_carboy_collection.image %}
              <img src="{{ ezgrip_carboy_collection.image | img_url: '400x400' }}" alt="{{ ezgrip_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezgrip_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">32% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="32"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">EXCELLENT DEAL</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      <!-- EZBio Carboy Collection -->
      {% assign ezbio_carboy_collection = collections['ezbio-carboys-lab-us-independence-day-sale-25'] %}
      {% if ezbio_carboy_collection.products.size > 0 %}
      <div class="collection-section">
        <div class="collection-header reverse">
          <div class="collection-header-content">
            <h2 class="collection-title">EZBio®  PP Carboys Assembly</h2>
          </div>
          <div class="collection-header-image">
            {% if ezbio_carboy_collection.image %}
              <img src="{{ ezbio_carboy_collection.image | img_url: '400x400' }}" alt="{{ ezbio_carboy_collection.title }}">
            {% endif %}
          </div>
        </div>
        <div class="products-grid">
          {% for product in ezbio_carboy_collection.products %}
          <div class="product-card" >
            <div class="discount-badge">
              <div class="discount-label">32% OFF</div>
            </div>
            <div class="product-image">
              {% if product.featured_image %}
                <img src="{{ product.featured_image | img_url: '300x300' }}" alt="{{ product.title }}">
              {% else %}
                <div style="color: #6c757d; font-size: 1rem; text-align: center;">Product Image</div>
              {% endif %}
            </div>
            <div class="product-content">
              <h3 class="product-title">{{ product.title }}</h3>
              {% if product.variants.first.sku != blank %}
                <div class="product-sku" onclick="copyToClipboard('{{ product.variants.first.sku }}', event)">
                  {{ product.variants.first.sku }}
                  <svg class="copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                    <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"></path>
                  </svg>
                </div>
              {% endif %}
              <div class="product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="original-price">${{ product.compare_at_price | money_without_currency }}</span>
                {% endif %}
                <span class="sale-price">${{ product.price | money_without_currency }}</span>
                <span class="final-price" data-sale-price="{{ product.price | money_without_currency }}" data-discount="32"></span>
              </div>
              <div class="smart-savings" onclick="toggleSavings(event, this)">
                <div class="smart-savings-header">
                  <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                  </div>
                  <span class="smart-savings-toggle">▼</span>
                </div>
                 <div class="savings-preview">Buy 2+ items and save $<span class="savings-preview-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                <div class="savings-details">
                  <div class="savings-option most-popular">
                    <span class="savings-label">EXCELLENT DEAL</span>
                    <div class="savings-text">More than 2 Items</div>
                    <div class="savings-price">and save <span class="savings-amount" data-base-price="{{ product.price | money_without_currency }}" data-qty="2"></span>/item</div>
                  </div>
                </div>
              </div>
              <button class="product-cta" onclick="openAddToCartPopupWithEvent(event, {{ product.id }}, '{{ product.title | escape }}', '{{ product.featured_image | img_url: '300x300' }}', '{{ product.variants.first.sku }}', {{ product.price }}, {{ product.variants.first.id }});">Shop Now</button>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

    </div>
</div>

<div id="addToCartPopup" class="add-to-cart-popup">
    <div class="popup-header">
        <div></div>
        <div class="popup-discount-badge" id="popupDiscountBadge"></div>
        <button class="popup-close" onclick="closeAddToCartPopup()">×</button>
    </div>

    <div class="popup-content">
        <div class="popup-product-image">
            <img id="popupProductImage" src="" alt="Product Image">
        </div>

        <h2 class="popup-product-title" id="popupProductTitle"></h2>
        <div class="popup-product-sku">SKU: <span id="popupProductSKU"></span></div>

        <div class="popup-product-price">
            <span class="popup-original-price" id="popupOriginalPrice" style="display: none;">$0.00</span>
            <span class="popup-sale-price">$<span id="popupSalePrice"></span></span>
            <span class="popup-final-price" id="popupFinalPrice">$0.00</span>
        </div>

        <div class="popup-smart-savings" onclick="togglePopupSavings(this)">
            <div class="popup-smart-savings-header">
                <div style="display: flex; align-items: center;">
                    <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="Smart Savings" style="height: 16px; width: 16px; margin-right: 4px;">
                    Smart Savings
                </div>
                <span class="popup-smart-savings-toggle">▼</span>
            </div>
            <div class="popup-savings-preview">Buy 2+ items and save $<span class="popup-savings-preview-amount" id="popupSavingsPreview">0.00</span>/item</div>
            <div class="popup-savings-details">
                <div class="popup-savings-option most-popular">
                    <div class="popup-savings-text">More than 2 Items</div>
                    <div class="popup-savings-price">and save $<span class="popup-savings-amount" id="popupSavingsAmount">0.00</span>/item</div>
                </div>
            </div>
        </div>

        <div class="popup-quantity-section">
            <label class="popup-quantity-label">Quantity</label>
            <div class="popup-quantity-controls">
                <button class="popup-quantity-btn" onclick="decreaseQuantity()">−</button>
                <input type="number" class="popup-quantity-input" id="popupQuantity" value="1" min="1" readonly>
                <button class="popup-quantity-btn" onclick="increaseQuantity()">+</button>
            </div>
        </div>

        <button class="popup-add-to-cart" onclick="addToCart()">Add to Cart</button>

        <div class="popup-recommended">
            <h3>You might also like</h3>
            <p>More products coming soon...</p>
        </div>
    </div>
</div>

<div id="overlay" class="overlay" onclick="closeAddToCartPopup()"></div>

<script>

// Countdown Timer
// Global function for opening popup with event handling
function openAddToCartPopupWithEvent(event, productId, productTitle, productImage, productSKU, productPrice, productVariantId) {
    event.stopPropagation();
    openAddToCartPopup(productId, productTitle, productImage, productSKU, productPrice, productVariantId, event);
}

function updateCountdown() {
  // Set the date we're counting down to (July 31st, 2024 at 11:59 PM)
  const countDownDate = new Date('2025-07-31T23:59:59').getTime();

  const timer = setInterval(function() {
    const now = new Date().getTime();
    const distance = countDownDate - now;

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    const dayStr = String(days).padStart(2, '0');
    const hourStr = String(hours).padStart(2, '0');
    const minuteStr = String(minutes).padStart(2, '0');
    const secondStr = String(seconds).padStart(2, '0');

    // Update main timer
    document.getElementById("days").innerHTML = dayStr;
    document.getElementById("hours").innerHTML = hourStr;
    document.getElementById("minutes").innerHTML = minuteStr;
    document.getElementById("seconds").innerHTML = secondStr;

    // Update sticky timer
    document.getElementById("sticky-days").innerHTML = dayStr;
    document.getElementById("sticky-hours").innerHTML = hourStr;
    document.getElementById("sticky-minutes").innerHTML = minuteStr;
    document.getElementById("sticky-seconds").innerHTML = secondStr;

    if (distance < 0) {
      clearInterval(timer);
      // Reset both timers
      ["days", "hours", "minutes", "seconds", "sticky-days", "sticky-hours", "sticky-minutes", "sticky-seconds"].forEach(id => {
        const element = document.getElementById(id);
        if (element) element.innerHTML = "00";
      });
    }
  }, 1000);
}

// Scroll to products function
function scrollToProducts() {
  const productsSection = document.getElementById('products-section');
  if (productsSection) {
    productsSection.scrollIntoView({ 
      behavior: 'smooth',
      block: 'start'
    });
  }
}

// Calculate final prices and smart savings
function calculatePricesAndSavings() {
  // Calculate final prices based on discount percentage from the actual discount label
  const finalPrices = document.querySelectorAll('.final-price');
  finalPrices.forEach(finalPrice => {
    const salePrice = parseFloat(finalPrice.dataset.salePrice);

    // Get the actual discount percentage from the discount label in the same product card
    const productCard = finalPrice.closest('.product-card');
    const discountLabel = productCard.querySelector('.discount-label');
    const discountText = discountLabel.textContent;
    const actualDiscountPercentage = parseInt(discountText.replace(/[^\d]/g, ''));

    const finalPriceAmount = salePrice - (salePrice * actualDiscountPercentage / 100);

    // Format price properly
    if (finalPriceAmount >= 1000) {
      finalPrice.textContent = '$' + (finalPriceAmount % 1 === 0 ? finalPriceAmount.toFixed(0) : finalPriceAmount.toFixed(2));
    } else {
      finalPrice.textContent = '$' + finalPriceAmount.toFixed(2);
    }
  });

  // Calculate smart savings amounts for expanded sections
  const savingsAmounts = document.querySelectorAll('.savings-amount');
  savingsAmounts.forEach(savingsAmount => {
    const basePrice = parseFloat(savingsAmount.dataset.basePrice);
    const qty = parseInt(savingsAmount.dataset.qty);

    // Find the discount percentage from the product card's discount badge
    const productCard = savingsAmount.closest('.product-card');
    const discountLabel = productCard.querySelector('.discount-label');
    const discountText = discountLabel.textContent;
    const discountPercentage = parseInt(discountText.replace(/[^\d]/g, ''));
    const discountRate = discountPercentage / 100;

    const regularTotal = basePrice * qty;
    const discountedTotal = regularTotal * (1 - discountRate);
    const totalSavings = regularTotal - discountedTotal;
    const perItemSavings = totalSavings / qty;

    savingsAmount.textContent = perItemSavings.toFixed(2);
  });

  // Calculate smart savings preview amounts - must match the savings amounts
  const savingsPreviewAmounts = document.querySelectorAll('.savings-preview-amount');
  savingsPreviewAmounts.forEach(savingsPreviewAmount => {
    const basePrice = parseFloat(savingsPreviewAmount.dataset.basePrice);
    const qty = parseInt(savingsPreviewAmount.dataset.qty);

    // Find the discount percentage from the product card's discount badge
    const productCard = savingsPreviewAmount.closest('.product-card');
    const discountLabel = productCard.querySelector('.discount-label');
    const discountText = discountLabel.textContent;
    const discountPercentage = parseInt(discountText.replace(/[^\d]/g, ''));
    const discountRate = discountPercentage / 100;

    const regularTotal = basePrice * qty;
    const discountedTotal = regularTotal * (1 - discountRate);
    const totalSavings = regularTotal - discountedTotal;
    const perItemSavings = totalSavings / qty;

    savingsPreviewAmount.textContent = perItemSavings.toFixed(2);
  });
}

function toggleSavings(event, element) {
  // Prevent navigation to product page
  event.stopPropagation();
  element.classList.toggle('expanded');
}
 function copyToClipboard(text, event) {
    event.stopPropagation();
    navigator.clipboard.writeText(text)
        .then(() => {
            // Show toast notification
            const toast = document.createElement('div');
            toast.classList.add('toast');
            toast.textContent = text + ' SKU copied!';
            document.body.appendChild(toast);
            // Animate toast
            setTimeout(() => {
                toast.classList.add('show');
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => {
                        if (document.body.contains(toast)) {
                            document.body.removeChild(toast);
                        }
                    }, 300); // Duration of fade-out
                }, 2000); // Display duration
            }, 100); // Small delay before fade-in
        })
        .catch(err => {
            console.error('Could not copy text: ', err);
            // Fallback toast for error
            const errorToast = document.createElement('div');
            errorToast.classList.add('toast');
            errorToast.textContent = 'Failed to copy SKU. Please try again.';
            errorToast.style.background = '#dc3545';
            document.body.appendChild(errorToast);
            setTimeout(() => {
                errorToast.classList.add('show');
                setTimeout(() => {
                    errorToast.classList.remove('show');
                    setTimeout(() => {
                        if (document.body.contains(errorToast)) {
                            document.body.removeChild(errorToast);
                        }
                    }, 300);
                }, 2000);
            }, 100);
        });
}


// Add to cart functionality with popup
let selectedProductId;
let selectedProductTitle;
let selectedProductImage;
let selectedProductSKU;
let selectedProductPrice;
let selectedProductVariantId;
let selectedProductDiscount;


function openAddToCartPopup(productId, productTitle, productImage, productSKU, productPrice, productVariantId, event) {
    selectedProductId = productId;
    selectedProductTitle = productTitle;
    selectedProductImage = productImage;
    selectedProductSKU = productSKU;
    selectedProductPrice = productPrice;
    selectedProductVariantId = productVariantId;

    // Find the product card to get discount information by using the event target
    const productCard = event.target.closest('.product-card');
    let discountPercentage = 0;
    let finalPrice = productPrice;

    if (productCard) {
        const discountLabel = productCard.querySelector('.discount-label');
        if (discountLabel) {
            const discountText = discountLabel.textContent;
            discountPercentage = parseInt(discountText.replace(/[^\d]/g, ''));

            // Get the actual final price that's already calculated on the card
            const cardFinalPrice = productCard.querySelector('.final-price');
            if (cardFinalPrice) {
                const finalPriceText = cardFinalPrice.textContent.replace('$', '');
                finalPrice = parseFloat(finalPriceText) * 100; // Convert back to cents
            } else {
                // Fallback calculation
                finalPrice = productPrice - (productPrice * discountPercentage / 100);
            }
        }
    }

    selectedProductDiscount = discountPercentage;

    // Helper function to format price
    function formatPrice(price) {
		const priceInNumber = Number(price)
        if (priceInNumber >= 1000) {
            // For prices >= 1000, show without decimals if it's a whole number
            return priceInNumber % 1 === 0 ? priceInNumber.toFixed(0) : priceInNumber.toFixed(2);
        } else {
            // For prices < 1000, always show 2 decimal places
            return priceInNumber.toFixed(2);
        }
    }

    // Populate popup content
    document.getElementById('popupProductImage').src = productImage;
    document.getElementById('popupProductTitle').textContent = productTitle;
    document.getElementById('popupProductSKU').textContent = productSKU;
    document.getElementById('popupSalePrice').textContent = formatPrice(productPrice / 100); // Convert from cents
    document.getElementById('popupFinalPrice').textContent = '$' + formatPrice(finalPrice / 100); // Convert from cents
    document.getElementById('popupQuantity').value = 1;

    // Show discount badge with the SAME percentage as the product card
    const discountBadge = document.getElementById('popupDiscountBadge');
    if (discountPercentage > 0) {
        discountBadge.textContent = discountPercentage + '% OFF';
        discountBadge.style.display = 'block';
    } else {
        discountBadge.style.display = 'none';
    }

    // Calculate smart savings using the SAME logic as the product cards
    const priceInDollars = productPrice / 100;
    const qty = 2;
    const regularTotal = priceInDollars * qty;
    const discountedTotal = regularTotal * (1 - discountPercentage / 100);
    const totalSavings = regularTotal - discountedTotal;
    const perItemSavings = totalSavings / qty;

    document.getElementById('popupSavingsPreview').textContent = formatPrice(perItemSavings);
    document.getElementById('popupSavingsAmount').textContent = formatPrice(perItemSavings);

    // Show overlay first
    const overlay = document.getElementById('overlay');
    const popup = document.getElementById('addToCartPopup');

    overlay.classList.add('show');

    // Small delay for smooth animation
    setTimeout(() => {
        popup.classList.add('show');
    }, 10);

    // Prevent body scroll
    document.body.style.overflow = 'hidden';
}

function closeAddToCartPopup() {
    const overlay = document.getElementById('overlay');
    const popup = document.getElementById('addToCartPopup');

    popup.classList.remove('show');

    setTimeout(() => {
        overlay.classList.remove('show');
        document.body.style.overflow = '';
    }, 300);
}

function increaseQuantity() {
    const quantityInput = document.getElementById('popupQuantity');
    const currentValue = parseInt(quantityInput.value);
    quantityInput.value = currentValue + 1;
}

function decreaseQuantity() {
    const quantityInput = document.getElementById('popupQuantity');
    const currentValue = parseInt(quantityInput.value);
    if (currentValue > 1) {
        quantityInput.value = currentValue - 1;
    }
}

function togglePopupSavings(element) {
    element.classList.toggle('expanded');
}

function addToCart() {
    const quantity = document.getElementById('popupQuantity').value;

    // Add to cart via AJAX instead of redirect
    fetch('/cart/add.js', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            id: selectedProductVariantId,
            quantity: parseInt(quantity)
        })
    })
    .then(response => response.json())
    .then(data => {
        // Show success notification
        showAddToCartSuccess();

        // Update popup to show checkout options and related products
        showCheckoutSection();
    })
    .catch(error => {
        console.error('Error adding to cart:', error);
        showAddToCartError();
    });
}

function showAddToCartSuccess() {
    // Create and show success notification
    const notification = document.createElement('div');
    notification.classList.add('cart-notification', 'success');
    notification.innerHTML = `
        <div class="notification-content">
            <span class="notification-icon">✓</span>
            <span class="notification-text">Product added to cart successfully!</span>
        </div>
    `;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.classList.add('show');
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }, 100);
}

function showAddToCartError() {
    const notification = document.createElement('div');
    notification.classList.add('cart-notification', 'error');
    notification.innerHTML = `
        <div class="notification-content">
            <span class="notification-icon">✗</span>
            <span class="notification-text">Failed to add product to cart. Please try again.</span>
        </div>
    `;
    document.body.appendChild(notification);

    setTimeout(() => {
        notification.classList.add('show');
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }, 100);
}

function showCheckoutSection() {
    // Update the popup content to show checkout and related products
    const addToCartButton = document.querySelector('.popup-add-to-cart');
    addToCartButton.style.display = 'none';

    // Create checkout section
    const checkoutSection = document.createElement('div');
    checkoutSection.classList.add('popup-checkout-section');
    checkoutSection.innerHTML = `
        <div class="checkout-buttons">
            <button class="checkout-btn primary" onclick="proceedToCheckout()">
                <span class="checkout-icon">🛒</span>
                Proceed to Checkout
            </button>
            <button class="checkout-btn secondary" onclick="continueShopping()">
                Continue Shopping
            </button>
        </div>

        <div class="related-products-section">
            <h3>You might also like</h3>
            <div class="related-products-grid">
                <div class="related-product-card" onclick="addRelatedProduct('158-3121-TR', 'EZBio TR Carboy 20L', 25000)">
                    <div class="related-product-image">
                        <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/158-3121-TR.jpg?v=1640000000" alt="Related Product" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="related-placeholder" style="display: none;">📦</div>
                    </div>
                    <div class="related-product-info">
                        <h4>EZBio TR Carboy 20L</h4>
                        <div class="related-product-price">
                            <span class="related-sale-price">$250.00</span>
                            <span class="related-final-price">$212.50</span>
                        </div>
                        <div class="related-discount-badge">15% OFF</div>
                    </div>
                </div>

                <div class="related-product-card" onclick="addRelatedProduct('158-0500-PC', 'EZBio PC Bottle 500ml', 8500)">
                    <div class="related-product-image">
                        <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/158-0500-PC.jpg?v=1640000000" alt="Related Product" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="related-placeholder" style="display: none;">🧪</div>
                    </div>
                    <div class="related-product-info">
                        <h4>EZBio PC Bottle 500ml</h4>
                        <div class="related-product-price">
                            <span class="related-sale-price">$85.00</span>
                            <span class="related-final-price">$74.80</span>
                        </div>
                        <div class="related-discount-badge">12% OFF</div>
                    </div>
                </div>
            </div>
        </div>
    `;

    // Insert after the quantity section
    const quantitySection = document.querySelector('.popup-quantity-section');
    quantitySection.parentNode.insertBefore(checkoutSection, quantitySection.nextSibling);
}

function proceedToCheckout() {
    // Redirect to cart/checkout page
    window.location.href = '/cart';
}

function continueShopping() {
    closeAddToCartPopup();
}

function addRelatedProduct(sku, title, price) {
    // Add related product to cart
    fetch('/cart/add.js', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({
            id: sku, // You may need to map SKU to variant ID
            quantity: 1
        })
    })
    .then(response => response.json())
    .then(data => {
        showAddToCartSuccess();
    })
    .catch(error => {
        console.error('Error adding related product:', error);
        showAddToCartError();
    });
}

// Start countdown when page loads
document.addEventListener('DOMContentLoaded', function() {
  updateCountdown();
  calculatePricesAndSavings();
});
</script>