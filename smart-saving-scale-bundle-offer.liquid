<div class="pdp-custom-payment-container mt-md-4"> <div class="pdp-custom-cta-heading"> <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/New_Icon.f3cc687da18d1b9a7778597a17d03fcc.gif?v=1712245731" alt="loading" style="height: 20px; width: 20px; margin-right: 6px;"> Smart Savings {% comment %} <img src="https://cdn.shopify.com/s/files/1/1064/0118/files/ryt-img-santa-claus.svg?v=1734424486" class="santa-gif" alt="Santa Claus"> {% endcomment %} </div> <div class="pdp-custom-payment-wrapper"> <button type="submit" name="add" class="pdp-custom-payment-button pdp-custom-cta-button btn custombfs_sale" data-product-id="{{ product.variants.first.id }}" data-free-product-handle="{{ freeProductHandle }}" data-qty="2"> <span class="pdp-custom-cta-value-lable popular">Most popular</span> <div class="pdp-custom-payment-button-inner"> <span class="pdp-custom-cta" style="color:#121212">More than 2 Items</span> <div class="pdp-custom-cta-price-container"> <span class="pdp-custom-cta-discount">and save</span> <span><span class="pdp-custom-cta-price" id="savingsValue2"></span><span class="pdf-custom-cta-price-item-per-order">/item</span></span> </div> </div> </button> <button type="submit" name="add" class="pdp-custom-payment-button pdp-custom-cta-button btn custombfs_sale" data-product-id="{{ product.variants.first.id }}" data-free-product-handle="{{ freeProductHandle }}" data-qty="3"> <span class="pdp-custom-cta-value-lable">Best Value</span> <div class="pdp-custom-payment-button-inner"> <span class="pdp-custom-cta" style="color:#121212">More than 3 Items</span> <div class="pdp-custom-cta-price-container"> <span class="pdp-custom-cta-discount">and save</span> <span><span class="pdp-custom-cta-price" id="savingsValue3"></span><span class="pdf-custom-cta-price-item-per-order">/item</span></span> </div> </div> </button> <!-- --> <button type="submit" name="add" class="pdp-custom-payment-button pdp-custom-cta-button btn custombfs_sale" data-product-id="{{ product.variants.first.id }}" data-free-product-handle="{{ freeProductHandle }}" data-qty="5"> <span class="pdp-custom-cta-value-lable">Most Savings</span> <div class="pdp-custom-payment-button-inner"> <span class="pdp-custom-cta" style="color:#121212">More than 5 Items</span> <div class="pdp-custom-cta-price-container"> <span class="pdp-custom-cta-discount">and save</span> <span><span class="pdp-custom-cta-price" id="savingsValue5"></span><span class="pdf-custom-cta-price-item-per-order">/item</span></span> </div> </div> </button> </div></div>
<style>
   .pdp-custom-payment-button.btn:active,.pdp-custom-payment-button.btn:hover,.pdp-custom-payment-wrapper .btn:active,.pdp-custom-payment-wrapper .custombfs_sale:active,.pdp-custom-payment-wrapper .custombfs_sale:hover{background:#ccece3!important}.pdf-custom-cta-price-item-per-order{color:#919191;font-size:14px;font-weight:700;letter-spacing:-.28px;line-height:1}.santa-gif{width:30px;transform:translate(0,0);opacity:1;margin-left:4px;transition:opacity .5s;z-index:100}.pdp-custom-payment-button.btn{background-color:#ccece3!important}
</style>
<script>
document.addEventListener("DOMContentLoaded",()=>{function e(){const e=document.getElementById("ProductPrice1"),t=document.getElementById("ComparePrice1");
    
    // Use the same final price calculation logic as promo-ticker-collection-feb-promo.liquid
    let basePrice;
    
    // First, get the product's base price
    const productPrice = parseFloat(e.innerText.replace("$","").replace(",",""));
    
    // Check if there's a percent tag discount applied (same as promo ticker)
    const discountElements = document.querySelectorAll('[class*="percent"], [data-percent], .promo-ticker .ajax_modal_custom_btn_css');
    let percentDiscount = 0;
    
    // Try to extract percent from promo ticker or other discount elements
    discountElements.forEach(element => {
        const text = element.textContent || element.innerText;
        const percentMatch = text.match(/(\d+)%\s*OFF/i);
        if (percentMatch) {
            percentDiscount = parseInt(percentMatch[1]);
        }
    });
    
    // Calculate final discounted price (same logic as promo ticker final_price)
    if (percentDiscount > 0) {
        const priceDiscount = productPrice * percentDiscount / 100;
        basePrice = productPrice - priceDiscount;
    } else {
        // Fallback: try to get sale price from elements
        const salePriceElement = document.querySelector('.sale-price, .salePrice_3B6QJ, .product-single__sale-price');
        if (salePriceElement) {
            const salePriceText = salePriceElement.textContent || salePriceElement.innerText;
            basePrice = parseFloat(salePriceText.replace("$","").replace(",",""));
        } else {
            basePrice = productPrice;
        }
    }
    
    var a=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");
    
    if(isNaN(basePrice))console.error("Error: Unable to parse product price.");else{
        // Calculate bulk savings using the SAME logic as simple-minimilistic.liquid
        // Use the sale price as the base and apply additional bulk discounts
        
        // Get the actual discount percentage from the product card
        const discountLabel = document.querySelector('.discount-label');
        let baseDiscountPercent = 0;
        if (discountLabel) {
            const discountText = discountLabel.textContent;
            baseDiscountPercent = parseInt(discountText.replace(/[^\d]/g, '')) || 0;
        }
        
        // Calculate for 2+ items with additional bulk discount
        const qty2 = 2;
        const additionalBulkDiscount2 = 5; // Additional 5% bulk discount
        const totalDiscount2 = baseDiscountPercent + additionalBulkDiscount2;
        const regularTotal2 = basePrice * qty2;
        const discountedTotal2 = regularTotal2 * (1 - totalDiscount2 / 100);
        const totalSavings2 = regularTotal2 - discountedTotal2;
        const perItemSavings2 = totalSavings2 / qty2;

        // Calculate for 3+ items with additional bulk discount  
        const qty3 = 3;
        const additionalBulkDiscount3 = 10; // Additional 10% bulk discount
        const totalDiscount3 = baseDiscountPercent + additionalBulkDiscount3;
        const regularTotal3 = basePrice * qty3;
        const discountedTotal3 = regularTotal3 * (1 - totalDiscount3 / 100);
        const totalSavings3 = regularTotal3 - discountedTotal3;
        const perItemSavings3 = totalSavings3 / qty3;

        // Calculate for 5+ items with additional bulk discount
        const qty5 = 5;
        const additionalBulkDiscount5 = 15; // Additional 15% bulk discount
        const totalDiscount5 = baseDiscountPercent + additionalBulkDiscount5;
        const regularTotal5 = basePrice * qty5;
        const discountedTotal5 = regularTotal5 * (1 - totalDiscount5 / 100);
        const totalSavings5 = regularTotal5 - discountedTotal5;
        const perItemSavings5 = totalSavings5 / qty5;
        
        let e = perItemSavings2,
            t = perItemSavings3,
            r = perItemSavings5;
        document.getElementById("savingsValue2").innerText="$"+a(e.toFixed(2)),
        document.getElementById("savingsValue3").innerText="$"+a(t.toFixed(2)),
        document.getElementById("savingsValue5").innerText="$"+a(r.toFixed(2))
    }
}e();var t={childList:!0,subtree:!0,characterData:!0};const r=new MutationObserver(e),n=new MutationObserver(e);var o=document.getElementById("ProductPrice1"),a=document.getElementById("ComparePrice1");r.observe(o,t),n.observe(a,t);const c=document.querySelectorAll(".pdp-custom-payment-button");c.forEach(n=>{n.addEventListener("click",e=>{e.preventDefault();const t=document.getElementById("AddToCartForm");var r=t.querySelector("#productSelect").value,e=parseInt(n.getAttribute("data-qty"))||1;r=r,e=e,fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({id:r,quantity:e})}).then(e=>e.json()).then(e=>{console.log("Item added to cart:",e)}).catch(e=>{console.error("Error:",e)})})})});

</script>