
{% schema %}
{
  "name": "Four Pillars",
  "class": "four-pillars-section",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "Our Four Pillars"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Section Description",
      "default": "The foundational principles that guide our organization"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background Image"
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Brand Color Overlay",
      "default": "#0071b9"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay Opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 85
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#0071b9"
    }
  ],
  "blocks": [
    {
      "type": "pillar",
      "name": "Pillar",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Pillar Title",
          "default": "Engineering"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Pillar Description",
          "default": "At Foxx Bioprocessing, engineering is the starting point of every solution."
        },
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon Type",
          "default": "svg",
          "options": [
            {
              "value": "svg",
              "label": "SVG Icon"
            },
            {
              "value": "image",
              "label": "Custom Image"
            }
          ]
        },
        {
          "type": "textarea",
          "id": "svg_code",
          "label": "SVG Code",
          "default": "<svg viewBox='0 0 24 24' fill='currentColor'><path d='M19.43 1.1a1 1 0 0 1 .6 1.8L19 3.9l1.03 1a1 1 0 0 1-.6 1.8H17.4l-.5 1.5h2.5a1 1 0 0 1 0 2h-3l-.5 1.5H18a1 1 0 0 1 0 2h-2.1l-1.5 4.6a1 1 0 0 1-1.9 0L11 13.7 9.5 18.3a1 1 0 0 1-1.9 0L6.1 14H4a1 1 0 0 1 0-2h1.9l-.5-1.5H3a1 1 0 0 1 0-2h2.4l-.5-1.5H2.6a1 1 0 0 1-.6-1.8L3 3.9 1.97 2.9a1 1 0 0 1 .6-1.8H4.6l.5-1.5a1 1 0 0 1 1.9 0L8.5 4.6 10 0a1 1 0 0 1 1.9 0L13.5 4.6 15 0a1 1 0 0 1 1.9 0L18.4 4.6l.5-1.5h2.49z'/></svg>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Icon Image"
        },
        {
          "type": "color",
          "id": "custom_color",
          "label": "Custom Pillar Color (optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Four Pillars",
      "category": "About",
      "blocks": [
        {
          "type": "pillar",
          "settings": {
            "title": "Engineering",
            "description": "At Foxx Bioprocessing, engineering is the starting point of every solution. Our team works closely with customer requirements to ensure technical accuracy, fit, and compliance. We design, prototype fast, build clean, and document every step.",
            "svg_code": "<svg viewBox='0 0 24 24' fill='currentColor'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z'/></svg>"
          }
        },
        {
          "type": "pillar",
          "settings": {
            "title": "Quality",
            "description": "Quality is our operating principle. Every product is built under certified cleanroom conditions with full traceability and validation. Backed by 15+ years of ISO 13485 Certification, we follow regulated manufacturing workflows and test to specification. If it doesn't meet the mark, it doesn't leave our facility.",
            "svg_code": "<svg viewBox='0 0 24 24' fill='currentColor'><path d='M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z'/></svg>"
          }
        },
        {
          "type": "pillar",
          "settings": {
            "title": "Customer Service",
            "description": "From first upload to final shipment, our team is available to review your designs, troubleshoot challenges, and support documentation needs. We respond fast, stay transparent, and deliver what we commit. Your timeline and specs are our priorities, with delivery in as fast as 48 hours**.",
            "svg_code": "<svg viewBox='0 0 24 24' fill='currentColor'><path d='M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63c-.37-.89-1.27-1.37-2.2-1.37-.49 0-.97.14-1.38.42L12 9.64 7.62 7.42c-.41-.28-.89-.42-1.38-.42-.93 0-1.83.48-2.2 1.37L1.5 16H4v6h4v-6h2v6h4zM7.89 15c.1-.26.15-.53.15-.8 0-.27-.05-.54-.15-.8L10 12.65l2.11.75c-.1.26-.15.53-.15.8 0 .27.05.54.15.8H7.89z'/></svg>"
          }
        },
        {
          "type": "pillar",
          "settings": {
            "title": "Family-owned Company",
            "description": "We are a family-owned company. All resources stay within the business and are reinvested into capability, systems, and teams. Decision-making stays close to the work, enabling stability and accountability to build better.",
            "svg_code": "<svg viewBox='0 0 24 24' fill='currentColor'><path d='M16 4c0-1.11.89-2 2-2s2 .89 2 2-.89 2-2 2-2-.89-2-2zm4 18v-6h2.5l-2.54-7.63c-.37-.89-1.27-1.37-2.2-1.37-.49 0-.97.14-1.38.42L12 9.64 7.62 7.42c-.41-.28-.89-.42-1.38-.42-.93 0-1.83.48-2.2 1.37L1.5 16H4v6h4v-6h2v6h4z'/></svg>"
          }
        }
      ]
    }
  ]
}
{% endschema %}

<!-- Four Pillars Section -->
<section class="foxx-four-pillars-section" data-section-id="{{ section.id }}" 
  {% if section.settings.background_image %}
    style="background-image: url('{{ section.settings.background_image | img_url: '1920x' }}');"
  {% endif %}>
  
  <div class="foxx-pillars-overlay" 
    style="background-color: {{ section.settings.overlay_color | default: '#0071b9' }}; opacity: {{ section.settings.overlay_opacity | default: 85 | divided_by: 100.0 }};"></div>
  
  <div class="foxx-pillars-container">
    <div class="foxx-section-header">
      <h2 class="foxx-section-title">{{ section.settings.section_title | default: 'Our Four Pillars' }}</h2>
      {% if section.settings.section_description != blank %}
        <p class="foxx-section-description">{{ section.settings.section_description }}</p>
      {% endif %}
      <div class="foxx-title-underline" style="background-color: {{ section.settings.accent_color | default: '#0071b9' }};"></div>
    </div>

    <div class="foxx-pillars-grid">
      {% for block in section.blocks %}
        {% if block.type == 'pillar' %}
          <div class="foxx-pillar-card" data-aos="fade-up" data-aos-delay="{{ forloop.index0 | times: 200 }}" {{ block.shopify_attributes }}>
            <div class="foxx-pillar-number">{{ forloop.index }}</div>
            
            <div class="foxx-pillar-icon-wrapper">
              {% if block.settings.icon_type == 'image' and block.settings.image != blank %}
                <div class="foxx-pillar-icon foxx-image-icon">
                  <img src="{{ block.settings.image | img_url: '80x80' }}" alt="{{ block.settings.title }}" loading="lazy">
                </div>
              {% elsif block.settings.svg_code != blank %}
                <div class="foxx-pillar-icon foxx-svg-icon" style="color: {% if block.settings.custom_color != blank %}{{ block.settings.custom_color }}{% else %}{{ section.settings.accent_color | default: '#0071b9' }}{% endif %};">
                  {{ block.settings.svg_code }}
                </div>
              {% endif %}
            </div>

            <div class="foxx-pillar-content">
              <h3 class="foxx-pillar-title" style="color: {% if block.settings.custom_color != blank %}{{ block.settings.custom_color }}{% else %}{{ section.settings.accent_color | default: '#0071b9' }}{% endif %};">
                {{ block.settings.title }}
              </h3>
              <div class="foxx-pillar-divider" style="background-color: {% if block.settings.custom_color != blank %}{{ block.settings.custom_color }}{% else %}{{ section.settings.accent_color | default: '#0071b9' }}{% endif %};"></div>
              <p class="foxx-pillar-description">{{ block.settings.description }}</p>
            </div>

            <div class="foxx-pillar-glow" style="background: radial-gradient(circle, {% if block.settings.custom_color != blank %}{{ block.settings.custom_color | color_modify: 'alpha', 0.1 }}{% else %}{{ section.settings.accent_color | default: '#0071b9' | color_modify: 'alpha', 0.1 }}{% endif %} 0%, transparent 70%);"></div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<style>
/* Foxx Four Pillars Section - Unique Styling */
.foxx-four-pillars-section {
  padding: 100px 0;
  position: relative;
  overflow: hidden;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  min-height: 100vh;
  display: flex;
  align-items: center;
}

.foxx-pillars-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
}

.foxx-pillars-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 0 20px;
  position: relative;
  z-index: 2;
}

/* Section Header */
.foxx-section-header {
  text-align: center;
  margin-bottom: 80px;
}

.foxx-section-title {
  font-size: 52px;
  font-weight: 800;
  color: #ffffff;
  margin-bottom: 25px;
  text-transform: uppercase;
  letter-spacing: 3px;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
}

.foxx-section-description {
  font-size: 22px;
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 35px;
  max-width: 700px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.7;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

.foxx-title-underline {
  width: 100px;
  height: 5px;
  margin: 0 auto;
  border-radius: 3px;
  box-shadow: 0 2px 10px rgba(255, 255, 255, 0.3);
}

/* Pillars Grid */
.foxx-pillars-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 30px;
  align-items: stretch;
}

/* Pillar Cards */
.foxx-pillar-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 25px;
  padding: 50px 35px;
  text-align: center;
  position: relative;
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  overflow: hidden;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
  border: 3px solid rgba(255, 255, 255, 0.2);
}

.foxx-pillar-card::before {
  content: '';
  position: absolute;
  top: -3px;
  left: -3px;
  right: -3px;
  bottom: -3px;
  background: linear-gradient(45deg, transparent 20%, var(--accent-color, #0071b9) 50%, transparent 80%);
  background-size: 300% 300%;
  border-radius: 28px;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.5s ease;
  animation: foxxBorderFlow 4s linear infinite;
}

@keyframes foxxBorderFlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.foxx-pillar-card:hover::before {
  opacity: 1;
}

.foxx-pillar-card:hover {
  transform: translateY(-20px) scale(1.03);
  box-shadow: 0 35px 70px rgba(0, 113, 185, 0.25);
  background: rgba(255, 255, 255, 1);
}

/* Pillar Number */
.foxx-pillar-number {
  position: absolute;
  top: -15px;
  right: 25px;
  width: 50px;
  height: 50px;
  background: linear-gradient(135deg, var(--accent-color, #0071b9), var(--accent-color, #005a91));
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  font-weight: 800;
  box-shadow: 0 5px 15px rgba(0, 113, 185, 0.4);
  transition: all 0.3s ease;
  border: 3px solid rgba(255, 255, 255, 0.9);
}

.foxx-pillar-card:hover .foxx-pillar-number {
  transform: scale(1.15) rotate(10deg);
  box-shadow: 0 8px 25px rgba(0, 113, 185, 0.6);
}

/* Pillar Icon */
.foxx-pillar-icon-wrapper {
  margin-bottom: 35px;
  display: flex;
  justify-content: center;
  position: relative;
}

.foxx-pillar-icon {
  width: 90px;
  height: 90px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, rgba(0, 113, 185, 0.1), rgba(0, 113, 185, 0.2));
  border-radius: 50%;
  transition: all 0.5s ease;
  position: relative;
  border: 3px solid rgba(0, 113, 185, 0.2);
}

.foxx-pillar-icon::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  background: linear-gradient(45deg, var(--accent-color, #0071b9), transparent, var(--accent-color, #0071b9));
  border-radius: 50%;
  z-index: -1;
  opacity: 0;
  transition: opacity 0.4s ease;
  animation: foxxIconPulse 2.5s ease-in-out infinite alternate;
}

@keyframes foxxIconPulse {
  0% { transform: scale(1); }
  100% { transform: scale(1.1); }
}

.foxx-pillar-card:hover .foxx-pillar-icon::before {
  opacity: 1;
}

.foxx-pillar-icon.foxx-svg-icon svg {
  width: 50px;
  height: 50px;
  transition: transform 0.4s ease;
}

.foxx-pillar-icon.foxx-image-icon img {
  width: 50px;
  height: 50px;
  object-fit: contain;
  transition: transform 0.4s ease;
}

.foxx-pillar-card:hover .foxx-pillar-icon {
  transform: scale(1.15) rotate(8deg);
  background: linear-gradient(135deg, rgba(0, 113, 185, 0.2), rgba(0, 113, 185, 0.3));
}

.foxx-pillar-card:hover .foxx-pillar-icon svg,
.foxx-pillar-card:hover .foxx-pillar-icon img {
  transform: scale(1.1) rotate(-8deg);
}

/* Pillar Content */
.foxx-pillar-content {
  position: relative;
  z-index: 2;
}

.foxx-pillar-title {
  font-size: 26px;
  font-weight: 800;
  margin-bottom: 20px;
  text-transform: uppercase;
  letter-spacing: 1.5px;
  transition: all 0.3s ease;
  line-height: 1.2;
}

.foxx-pillar-divider {
  width: 60px;
  height: 4px;
  margin: 0 auto 25px;
  border-radius: 2px;
  transition: width 0.4s ease;
}

.foxx-pillar-card:hover .foxx-pillar-divider {
  width: 80px;
}

.foxx-pillar-description {
  font-size: 16px;
  color: #555;
  line-height: 1.8;
  margin: 0;
  transition: color 0.3s ease;
  text-align: left;
}

.foxx-pillar-card:hover .foxx-pillar-description {
  color: #333;
}

/* Pillar Glow Effect */
.foxx-pillar-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 120%;
  height: 120%;
  transform: translate(-50%, -50%) scale(0);
  transition: transform 0.5s ease;
  border-radius: 25px;
  pointer-events: none;
  z-index: 1;
}

.foxx-pillar-card:hover .foxx-pillar-glow {
  transform: translate(-50%, -50%) scale(1.3);
}

/* Responsive Design */
@media (max-width: 1200px) {
  .foxx-pillars-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 25px;
  }
  
  .foxx-section-title {
    font-size: 44px;
  }
}

@media (max-width: 768px) {
  .foxx-four-pillars-section {
    padding: 80px 0;
    background-attachment: scroll;
  }

  .foxx-pillars-container {
    padding: 0 15px;
  }

  .foxx-section-title {
    font-size: 36px;
    letter-spacing: 2px;
  }

  .foxx-section-description {
    font-size: 18px;
  }

  .foxx-pillars-grid {
    grid-template-columns: 1fr;
    gap: 25px;
  }

  .foxx-pillar-card {
    padding: 40px 25px;
  }

  .foxx-pillar-icon {
    width: 70px;
    height: 70px;
  }

  .foxx-pillar-icon.foxx-svg-icon svg,
  .foxx-pillar-icon.foxx-image-icon img {
    width: 35px;
    height: 35px;
  }

  .foxx-pillar-title {
    font-size: 22px;
  }

  .foxx-pillar-description {
    font-size: 15px;
  }

  .foxx-pillar-number {
    width: 40px;
    height: 40px;
    font-size: 18px;
    top: -10px;
    right: 20px;
  }
}

@media (max-width: 480px) {
  .foxx-section-title {
    font-size: 28px;
  }

  .foxx-section-description {
    font-size: 16px;
  }

  .foxx-pillar-card {
    padding: 35px 20px;
  }

  .foxx-pillar-title {
    font-size: 20px;
  }

  .foxx-pillar-description {
    font-size: 14px;
  }
}

/* Animation on Scroll */
@media (prefers-reduced-motion: no-preference) {
  .foxx-pillar-card {
    opacity: 0;
    transform: translateY(40px);
    animation: foxxFadeInUp 1s ease forwards;
  }

  .foxx-pillar-card:nth-child(1) { animation-delay: 0.2s; }
  .foxx-pillar-card:nth-child(2) { animation-delay: 0.4s; }
  .foxx-pillar-card:nth-child(3) { animation-delay: 0.6s; }
  .foxx-pillar-card:nth-child(4) { animation-delay: 0.8s; }

  @keyframes foxxFadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .foxx-pillar-card,
  .foxx-pillar-icon {
    animation: none;
    transition: none;
  }
}

.foxx-pillar-card:focus {
  outline: 3px solid #ffffff;
  outline-offset: 5px;
}

/* Print Styles */
@media print {
  .foxx-four-pillars-section {
    background: white !important;
    color: black !important;
  }

  .foxx-pillars-overlay,
  .foxx-pillar-glow,
  .foxx-pillar-number {
    display: none;
  }
}
</style>
